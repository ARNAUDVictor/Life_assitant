<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gestionnaire de TÃ¢ches</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/tasks.css') }}">
</head>
<body>
    <div class="container">
        <h1>ğŸ“ Gestionnaire de TÃ¢ches</h1>
        
        <!-- Formulaire pour ajouter une tÃ¢che -->
        <div class="add-task">
            <form method="POST" action="/add_task">
                <input type="text" name="title" placeholder="Nouvelle tÃ¢che..." required>
                <button type="submit">Ajouter</button>
            </form>
        </div>

        <!-- TÃ¢ches en cours -->
        <div class="tasks-section">
            <h2>En cours <span class="task-count">({{ tasks|selectattr('completed', 'equalto', false)|list|length }})</span></h2>
            {% set active_tasks = tasks|selectattr('completed', 'equalto', false)|list %}
            {% if active_tasks %}
                {% for task in active_tasks %}
                <div class="task">
                    <span>{{ task.title }}</span>
                    <div class="task-actions">
                        <a href="/mark_task_complete/{{ task.id }}" class="btn-toggle" title="Marquer comme terminÃ©e">âœ“</a>
                        <a href="/delete_task/{{ task.id }}" class="btn-delete" title="Supprimer">âœ•</a>
                    </div>
                </div>
                {% endfor %}
            {% else %}
                <p class="empty">Aucune tÃ¢che en cours. Profitez-en ! ğŸ‰</p>
            {% endif %}
        </div>

        <!-- TÃ¢ches terminÃ©es -->
        <div class="completed-section">
            <h2 class="completed-header">TerminÃ©es <span class="task-count">({{ tasks|selectattr('completed', 'equalto', true)|list|length }})</span></h2>
            {% set completed_tasks = tasks|selectattr('completed', 'equalto', true)|list %}
            {% if completed_tasks %}
                {% for task in completed_tasks %}
                <div class="task completed">
                    <span>{{ task.title }}</span>
                    <div class="task-actions">
                        <a href="/mark_task_complete/{{ task.id }}" class="btn-toggle" title="Marquer comme non terminÃ©e">â†º</a>
                        <a href="/delete_task/{{ task.id }}" class="btn-delete" title="Supprimer">âœ•</a>
                    </div>
                </div>
                {% endfor %}
            {% else %}
                <p class="empty">Aucune tÃ¢che terminÃ©e pour le moment.</p>
            {% endif %}
        </div>
    </div>
</body>
</html>